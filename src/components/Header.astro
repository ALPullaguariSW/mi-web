---
// src/components/Header.astro
import Logo from './LogoLeon.svg?raw';
---
<header class="fixed top-0 left-0 w-full z-50 transition-colors duration-300" id="main-header">
  <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
    <a href="#hero" class="w-12 h-12 text-white">
      <div set:html={Logo} />
    </a>
    <!-- Añadimos un ID al contenedor de los enlaces para seleccionarlos fácilmente -->
    <div class="hidden md:flex space-x-8 text-white font-semibold" id="nav-links">
      <a href="#about" class="hover:text-cyan-400 transition-colors">Sobre Mí</a>
      <a href="#projects" class="hover:text-cyan-400 transition-colors">Proyectos</a>
      <a href="#contact" class="hover:text-cyan-400 transition-colors">Contacto</a>
    </div>
  </nav>
</header>

<style is:global>
  .logo-bg { fill: #0ab2c9; }
  .logo-lion { fill: #f4f6fa; }
</style>

<!-- ESTE SCRIPT SOLUCIONA EL PROBLEMA DEL SCROLL -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // 1. Manejar los enlaces de navegación principales
    const navLinksContainer = document.querySelector('#nav-links');
    if (!navLinksContainer) return; // Salimos si no encontramos el contenedor

    const navLinks = navLinksContainer.querySelectorAll('a');

    navLinks.forEach(link => {
      link.addEventListener('click', (event) => {
        event.preventDefault();
        
        const href = link.getAttribute('href');
        if (!href) return; // Salimos si el enlace no tiene href

        const targetElement = document.querySelector(href);

        // La comprobación clave sigue aquí
        if (targetElement) {
          // Extraemos la propiedad 'offsetTop' para que TypeScript sepa que es un número.
          const offsetTop = (targetElement as HTMLElement).offsetTop;
          
          window.scrollTo({
            top: offsetTop,
            behavior: 'smooth'
          });
        }
      });
    });

    // 2. Manejar el clic en el logo
    const logoLink = document.querySelector('header a[href="#hero"]');
    if (logoLink) {
        logoLink.addEventListener('click', (e) => {
            e.preventDefault();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    }
  });
</script>